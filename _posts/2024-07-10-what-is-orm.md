---
title: "ORM이란?"
description: 
author: 이원모
date: 2024-07-10
categories: [etc.]
tags: [orm, 객체-관계 매핑]
pin: false
math: true
mermaid: true
image:
  path: /thumbnail/orm.png
  lqip: 
  alt: 
---

## 개념
---
ORM은 Object-Relational Mapping의 약자로, 객체 지향 프로그래밍 언어를 사용하여 관계형 데이터베이스를 조작할 수 있게하는 기술입니다. ORM을 사용하면 데이터베이스의 테이블을 프로그래밍 언어의 객체로 매핑하여, SQL 쿼리를 직접 작성하지 않고도 데이터베이스 작업을 수행할 수 있습니다. 이는 코드의 가독성을 높이고 유지보수를 용이하게 하며, 데이터베이스 독립성을 어느 정도 제공해줍니다.

전통적인 데이터베이스 접근 방식은 SQL 쿼리를 직접 작성하고 이를 통해 데이터를 조회, 삽입, 갱신, 삭제하는 것이었습니다. 하지만 이 방식은 코드의 가독성을 떨어뜨리고, 유지보수를 어렵게 하며, SQL 주입 공격 같은 보안 문제를 일으킬 수 있습니다. ORM은 이러한 문제를 해결하기 위해 등장했습니다. ORM을 사용하면 데이터베이스 접근 코드를 객체 지향 방식으로 작성할 수 있어 코드의 가독성과 유지보수성을 높일 수 있습니다.

ORM에서 사용되는 주요 용어는 다음과 같습니다.
> - 엔터티 : 데이터베이스 테이블에 대응되는 클래스입니다.
> - 속성 : 테이블의 열에 대응되는 클래스의 필드입니다.
> - 테이블 : 데이터가 저장되는 관계형 데이터베이스의 기본 구조입니다.
> - 열 : 테이블의 각 데이터 항목을 나타냅니다.

<br>

## 주요 ORM 프레임워크
---
- Hibernate (자바)  

  Hibernate는 자바 기반의 ORM 프레임워크로, 객체 지향 프로그래밍의 강점을 살려 데이터베이스 작업을 수행할 수 있게 해줍니다. Hibernate는 복잡한 쿼리와 관계 설정을 쉽게 처리할 수 있으며, 다양한 데이터베이스와 호환됩니다.

- Django ORM (파이썬)  

  Django는 파이썬 기반의 웹 프레임워크로, 내장 ORM을 통해 데이터베이스를 쉽게 다룰 수 있습니다. Django ORM은 직관적이고 강력한 기능을 제공하여 복잡한 데이터베이스 작업도 간단히 수행할 수 있습니다.

- Entity Framework (C#)  

  Entity Framework는 마이크로소프트의 .NET 프레임워크를 위한 ORM 도구로, C# 언어와 긴밀하게 통합되어 있습니다. Entity Framework는 LINQ(Language Integrated Query)를 사용해 데이터베이스 쿼리를 직관적으로 작성할 수 있습니다.

- SQLAlchemy (파이썬)  

  SQLAlchemy는 파이썬용 ORM 프레임워크로, 높은 유연성과 강력한 기능을 제공합니다. SQLAlchemy는 SQL 표현과 객체 지향 매핑을 모두 지원하여 복잡한 데이터베이스 작업을 손쉽게 수행할 수 있습니다.

<br>

## 장단점
---
- 장점
  - 생산성 향상  

    개발자는 SQL 쿼리를 직접 작성하지 않고도 데이터베이스 작업을 수행할 수 있어 개발 속도가 빨라집니다.

  - 유지보수 용이성  

    데이터베이스 접근 코드가 객체 지향적으로 작성되므로 코드의 가독성과 유지보수성이 높아집니다.

  - 데이터베이스 독립성  

    ORM을 사용하면 특정 데이터베이스에 종속되지 않고 다양한 데이터베이스를 쉽게 전환할 수 있습니다.

- 단점
  - 성능 이슈  

    복잡한 쿼리를 생성할 때 ORM은 SQL 쿼리보다 성능이 떨어질 수 있습니다.

  - 복잡성 증가  

    ORM 프레임워크 자체가 복잡할 수 있으며, 잘못 사용할 경우 코드의 복잡성이 증가할 수 있습니다.

<br>

## 성능 최적화
---
ORM을 사용할 때 성능 문제는 중요한 고려 사항입니다. 복잡한 쿼리나 대량의 데이터 처리는 성능에 영향을 줄 수 있으므로, 이를 최적화하는 방법을 이해하고 활용하는 것이 중요합니다.

- Lazy Loading vs Eager Loading
  - Lazy Loading  

  필요한 시점에 데이터를 불러오는 방식으로 초기 로딩 시간을 줄일 수 있습니다. 이는 메모리 사용을 최적화하고, 불필요한 데이터를 로드하지 않도록 합니다.

  - Eager Loading

  데이터를 미리 불러오는 방식으로, 이후 데이터 접근 시 데이터베이스 요청을 줄일 수 있습니다. 이는 여러 번의 데이터베이스 요청을 줄여 성능을 향상시킵니다.

- 캐싱 전략

  자주 사용되는 데이터를 캐시에 저장해 두면, 데이터베이스 요청을 줄여 성능을 향상시킬 수 있습니다. 이를 통해 데이터베이스 부하를 줄이고 응답 속도를 빠르게 할 수 있습니다.

- 쿼리 최적화 방법

  ORM을 사용할 때 쿼리를 최적화하는 것이 중요합니다. 인덱스를 설정하고, 불필요한 데이터를 조회하지 않도록 쿼리를 작성하여 성능을 크게 향상시킬 수 있습니다. 이는 데이터베이스의 쿼리 계획을 분석하고 최적화하는 작업을 포함합니다.

<br>

## 한계와 극복
---
ORM은 많은 장점을 제공하지만, 몇 가지 한계도 존재합니다. 이러한 한계를 이해하고 적절한 대처 방법을 사용하는 것이 중요합니다.

- 복잡한 쿼리 문제

  ORM은 복잡한 쿼리를 생성할 때 성능이 떨어질 수 있습니다. 이 경우, ORM이 생성하는 쿼리를 분석하고 필요한 경우 직접 SQL 쿼리를 작성하여 성능을 최적화할 수 있습니다.

- 데이터베이스 특정 기능 활용

  ORM은 데이터베이스 독립성을 유지하기 위해 데이터베이스 특정 기능을 사용하지 않는 경우가 많습니다. 하지만 성능 향상이 필요할 경우, 데이터베이스의 고유 기능을 활용하여 성능을 최적화할 수 있습니다.

- SQL과의 병행 사용

  ORM을 사용하면서도 필요에 따라 직접 SQL 쿼리를 작성해 사용할 수 있습니다. 이를 통해 ORM의 한계를 보완하고 복잡한 쿼리를 효율적으로 처리할 수 있습니다.

- 성능 모니터링 및 튜닝

  애플리케이션의 성능을 지속적으로 모니터링하고, 성능 이슈가 발생할 경우 이를 튜닝하는 것이 중요합니다. 이는 쿼리 실행 계획을 분석하고, 데이터베이스 인덱스를 최적화하며, 필요한 경우 데이터베이스 설계를 변경하는 작업을 포함합니다.

---

읽어주셔서 감사합니다. 😊 

__Reference__  
ChatGPT - OpenAI